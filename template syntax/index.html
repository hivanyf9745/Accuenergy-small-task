<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="https://unpkg.com/vue@3/dist/vue.global.js" defer></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDv9u1tew7O6EFzcDBQ2zbPvb8iHdQySYU&libraries=places"
      defer></script>
    <script src="app.js" defer></script>

    <!-- Bootstrap module -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ"
      crossorigin="anonymous" />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe"
      crossorigin="anonymous"
      defer></script>
    <title>Accuenergy Small Task</title>
  </head>
  <body>
    <section id="app">
      <div>
        <h2>Location Search</h2>
        <div class="d-flex align-items-center">
          <button class="btn btn-primary" @click="getCurrentLocation">
            Get your current location
          </button>
          <div
            v-if="currentLocation === ''"
            class="spinner-border text-primary ms-5"
            role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        </div>
        <p v-if="currentLocation">Current Location: {{ currentLocation }}</p>
      </div>

      <div class="mt-5">
        <h2>Input current Location</h2>
        <input
          ref="autocompleteInput"
          v-model="searchInput"
          type="text"
          placeholder="Search location"
          @keydown.enter="searchLocation" />
        <button @click="searchLocation" class="btn btn-primary">Search</button>

        <div v-if="!map" class="d-flex align-items-center mt-2">
          <div class="spinner-border text-primary mx-3" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
          <div>Loading Current Location...</div>
        </div>

        <div ref="mapContainer" style="height: 400px; width: 100%"></div>

        <div v-if="allLocations.length !== 0">
          <button @click="deleteSelectedPlaces">Delete Selected</button>

          <table>
            <tr v-for="(place, index) in paginatedPlaces" :key="place">
              <td>
                <input type="checkbox" v-model="place.selected" />
              </td>
              <td>{{ place.name }}</td>
            </tr>
          </table>

          <button @click="previousPage" :disabled="currentPage === 1">
            Previous
          </button>
          <button @click="nextPage" :disabled="currentPage === totalPages">
            Next
          </button>
          <p>Page {{ currentPage }} of {{ totalPages }}</p>
        </div>

        <div v-if="allLocations.length === 0" class="mt-3">
          <h3>You haven't searched for any places yet</h3>
        </div>
      </div>

      <div class="mt-5">
        <h2>Latest Time Zone & Local Time</h2>
        <p>Time Zone: {{ timeZoneId }}</p>
        <p>Local Time: {{ localTime }}</p>
      </div>
    </section>
  </body>
</html>
